# 基于ECharts的可视化开发框架：接口规范

规范的目的：

- 方便前端形成可视化框架
- 加快后续项目的开发效率


说明：

- 接口规范尽量和echarts的数据类似

### 接口返回值格式

```
{
    error: 0,
    data:  {
        // 具体的数据，不同类型的饼图有不同类型的返回数据
    }
}
```


### 折线图和柱形图

```
{
    legend:  ['最高气温','最低气温'],
    xAxis:   ['周一','周二','周三','周四','周五','周六','周日'],   # 横坐标
    value:   [
        [11, 11, 15, 13, 12, 13, 10],
        [1, -2, 2, 5, 3, 2, 0]
    ]
}
```

### 饼图

标准饼图
```
{
    legend: [
        ['渠道1', '渠道2', '渠道3']
    ],
    value:  [
        [4300, 10000, 28000]
    ]
}
```

嵌套饼图

```
{
    legend: [
        ['渠道1', '渠道2', '渠道3'],   // 内饼图
        ['子渠道1', '子渠道2', '子渠道3', '子渠道4', '子渠道5', '子渠道6']    // 外饼图
    ],
    value:  [
        [4300, 10000, 28000],                      // 内饼图
        [5000, 14000, 28000, 31000, 42000, 21000]  // 外饼图
    ]
}
```

### 雷达图

```
{
    legend: ['预算分配', '实际开销'],
    value:  [
        [4300, 10000, 28000, 35000, 50000, 19000],
        [5000, 14000, 28000, 31000, 42000, 21000],
    ]
}
```

### K线图

```
{
    xAxis: ["2013/1/24", "2013/1/25", "2013/1/28", "2013/1/29", "2013/1/30"],
    value: [
        // 开盘，收盘，最低，最高
        [2320.26,2302.6,2287.3,2362.94],
        [2300,2291.3,2288.26,2308.38],
        [2295.35,2346.5,2295.35,2346.92],
        [2347.22,2358.98,2337.35,2363.8],
        [2383.43,2385.42,2371.23,2391.82]
    ]
}
```

### 漏斗图

```
{
    legend: ['step1', 'step2', 'step3', 'step4'],
    value:  [100, 80, 77, 60]
}
```

### 散点图

```
{
    legend: ["商品1", "商品2"],
    value:  [
        // 横坐标，纵坐标
        // 销售额，利润率
        [10000, 25],       // 商品1
        [20000, 30]        // 商品2
    ]
}

```

分组对照散点图

```
{
    // 分组
    catetory: ["A Shop", "B Shop"],
    
    // 【可选】每个元素的标签
    legend: [
        ['ProductA1', 'ProductA2'],
        ['ProductB1', 'ProductB2']
    ],

    // 值
    value:  [
        // 横坐标，纵坐标
        // 销售额，利润率
        [
            [10000, 20],
            [2000, 33] 
        ],
        [
            [1320, 15],
            [40000, 30] 
        ]
    ]
}

```


### 气泡图

```
{
    legend: ["用户1", "用户2"],
    value:  [
        // 横坐标，纵坐标，大小
        // 最近成交天数，成交次数，成交额
        [100, 2, 5000],      // 用户1
        [20, 3, 3300]        // 用户2
    ]
}
```

分组对照气泡图

```
{
    // 分组
    categories: ["男性用户", "女性用户"],
    
    // 【可选】每个元素的标签
    legend: [
        ['男1', '男2'],
        ['女1', '女2']
    ],

    // 值
    value:  [
        // 横坐标，纵坐标，大小
        // 最近成交天数，成交次数，成交额
        [
            [100, 2, 5000],
            [20, 3, 3300] 
        ],
        [
            [10, 1, 500],
            [40, 4, 3000] 
        ]
    ]
}

```

### 地图

```
// 下面是两个产品在各地的销量
{
    legend: [iphone4', 'iphone5'],
    value: [
        [
            {name: '北京',value: 10},
            {name: '天津',value: 20},
            {name: '上海',value: 30},
            {name: '广东',value: 70},
            {name: '台湾',value: 30},
            {name: '香港',value: 20},
            {name: '澳门',value: 50}
        ],        
        [
            {name: '河北',value: 20},
            {name: '重庆',value: 30},
            {name: '湖南',value: 70},
            {name: '广西',value: 30},
            {name: '山西',value: 20},
        ]        
    ]
}

```



### 关系网络

```
{
    // 分类
    categories : [
        {
            name: '人物'
        },
        {
            name: '家人'
        },
        {
            name:'朋友'
        }
    ],

    // 节点
    nodes:[
        {category:0, name: '乔布斯', value : 10},
        {category:1, name: '丽萨-乔布斯',value : 2},
        {category:1, name: '保罗-乔布斯',value : 3},
        {category:1, name: '克拉拉-乔布斯',value : 3},
        {category:1, name: '劳伦-鲍威尔',value : 7},
        {category:2, name: '史蒂夫-沃兹尼艾克',value : 5},
        {category:2, name: '奥巴马',value : 8},
        {category:2, name: '比尔-盖茨',value : 9},
        {category:2, name: '乔纳森-艾夫',value : 4},
        {category:2, name: '蒂姆-库克',value : 4},
        {category:2, name: '龙-韦恩',value : 1},
    ],

    // 关系
    links : [
        {source : '丽萨-乔布斯', target : '乔布斯', weight : 1},
        {source : '保罗-乔布斯', target : '乔布斯', weight : 2},
        {source : '克拉拉-乔布斯', target : '乔布斯', weight : 1},
        {source : '劳伦-鲍威尔', target : '乔布斯', weight : 2},
        {source : '史蒂夫-沃兹尼艾克', target : '乔布斯', weight : 3},
        {source : '奥巴马', target : '乔布斯', weight : 6},
        {source : '比尔-盖茨', target : '乔布斯', weight : 6},
        {source : '乔纳森-艾夫', target : '乔布斯', weight : 1},
        {source : '蒂姆-库克', target : '乔布斯', weight : 1},
        {source : '龙-韦恩', target : '乔布斯', weight : 1},
        {source : '克拉拉-乔布斯', target : '保罗-乔布斯', weight : 1},
        {source : '奥巴马', target : '保罗-乔布斯', weight : 1},
        {source : '奥巴马', target : '克拉拉-乔布斯', weight : 1},
        {source : '奥巴马', target : '劳伦-鲍威尔', weight : 1},
        {source : '奥巴马', target : '史蒂夫-沃兹尼艾克', weight : 1},
        {source : '比尔-盖茨', target : '奥巴马', weight : 6},
        {source : '比尔-盖茨', target : '克拉拉-乔布斯', weight : 1},
        {source : '蒂姆-库克', target : '奥巴马', weight : 1}
    ]

}

```


